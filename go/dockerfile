FROM golang:1.21-alpine
 
RUN addgroup -S mercari && adduser -S trainee -G mercari
# Goのパッケージをインストール
RUN apk add --no-cache go gcc musl-dev

WORKDIR /app
COPY . /app/

COPY mercari.sqlite3 /db
RUN chown -R trainee:mercari /db

COPY go.mod go.sum ./
RUN go mod download

RUN go mod tidy
CMD ["go", "run", "app/main.go"]
